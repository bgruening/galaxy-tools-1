<tool id="peptimapper_clustqualify" name="ClustQualify" version="2.1">
    <description>annotates clusters according to gff annotation files</description>
    <requirements>
        <container type="docker">dockerprotim/peptimapper:d3eb807d7d5a</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
ln -s '$clustersfile' 'in.clusters' &&
mkdir 'repo' &&
unzip '${gffdir}' -d repo &&
LXQualify 'in.clusters' repo &&
mv 'in.clusters.txt' '$clustersQualifResults'
    ]]></command>
    <inputs>
      <param name="clustersfile" type="data" format="txt" label="Clusters file" help="Clusters file generated by PepMatch" />
      <param name="gffdir" type="data" format="data" label="GFF files repository" help="zipped repository : for upload a zip repository into Galaxy, install before and use 'no_unzip.zip' datatype and select it into your upload form otherwise Galaxy decompress uploaded zip datatype file automatically"/>
    </inputs>
    <outputs>
        <data format="txt" name="clustersQualifResults" label="${clustersfile.element_identifier}.qual"/>
    </outputs>
    <tests>
        <test>
            <param name="clustersfile" value="clustqualify/sample_01.mgf.3.5.tag.Nuc_genome.fasta.0.5.hit.2.2.5000.clust.txt"/>
            <param name="gffdir" value="clustqualify/gff3_files_repository.zip"/>
            <output name="clustersQualifResults" file="clustqualify/sample_01.mgf.3.5.tag.Nuc_genome.fasta.0.5.hit.2.2.5000.clust.qual.txt"/>
        </test>
    </tests>
    <help><![CDATA[

    **Description**

    ClustQualify : run LXQualify from the "peptimapper" docker.
    ClustQualify annotes clusters, generated from PepMatch, according to gff annotation files.

    **Integrated by**

    Laetitia Guillot Cloarec
    PROTIM Biogenouest proteomics Core Facility, Rennes
    May,2016

    ]]></help>
    <citations>
        <citation type="bibtex">
        @misc{renameTODO,
        author = {Protim Core facility},
        year = {2016},
        title = {ClustQualify},
        url = {protim.eu},
        }
        </citation>
    </citations>
</tool>
