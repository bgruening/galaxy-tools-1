<tool id="peptimapper_clust_to_gff" name="ClustToGFF" version="2.0">
    <description>add clusters locations into GFF files to be integrated into a genome viewer</description>
    <requirements>
        <container type="docker">dockerprotim/peptimapper</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
unzip '${gffdir}' -d gff &&
mkdir "outputdir" &&
LXClust2Gff gff/* outputdir '${clustersfile}' &&
mv *.gff outputdir/ &&
zip -r outputdir2 outputdir/* &&
mv outputdir2.zip '${gfffiles}'
    ]]></command>
    <inputs>
        <param name="clustersfile" type="data" format="txt" label="Clusters file" help="Clusters file generated by PepMatch" />
        <param name="gffdir" type="data" label="GFF files repository" help="Zipped repository containing all organism GFF files" />
    </inputs>
    <outputs>
        <data name="gfffiles" format="zip" label="GFF files including clusters locations" />
    </outputs>
    <tests>
        <test>
            <param name="clustersfile" value="clusttogff/Gamete.5.3.2.5000.clust"/>
            <param name="gffdir" value="clusttogff/gff3_files_repository.zip"/>
            <output name="output" file="clusttogff/out.zip" compare="sim_size"/>
        </test>
    </tests>
    <help><![CDATA[
**Description**

ClustToGFF : run LXClust2Gff from the "peptimapper" docker.
ClustToGFF adds clusters locations, generated by PepMatch, into GFF annotation files to be integrated into a genome viewer.

**Integrated by**

Laetitia Guillot Cloarec
PROTIM Biogenouest proteomics Core Facility, Rennes
July,2017
    ]]></help>
    <citations>
        <citation type="bibtex">
            @misc{renameTODO,
            author = {Protim Core facility},
            year = {2017},
            title = {ClustToGFF},
            url = {protim.eu},
            }
        </citation>
    </citations>
</tool>
